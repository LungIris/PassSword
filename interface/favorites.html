<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="" X-UA-Compatible " content="IE-edge ">
        <meta name="viewport " content="width=device.width, initial-scale=1.0 ">
        <title>PassSword
        </title>
        <link rel="stylesheet " type="text/css " href="favorites.css">
</head>
<body>
    <div class="wrapper" id="blur">
        <div class="sidebar">
            <ul>
                <li class="logo"  style="--bg:#333;">
                    <a href="#">
                        <div class="icon">
                            <img src="images/Logov2.png" width="50" height="50">
                        </div>
                       <div class="text">PassSword</div>
                    </a>
                </li>
                <div class="MenuList">
    
                    <li style="--bg:#57e5ff;">
                        <a href="dashboard.html">
                            <div class="icon"><ion-icon name="key"></ion-icon></div>
                        <div class="text">PassSwords</div>
                        </a>
                    </li>
                    <li style="--bg:#e4f03a;" class="active">
                        <a href="favorites.html">
                            <div class="icon"><ion-icon name="star"></ion-icon></ion-icon></div>
                        <div class="text">Favorites</div>
                        </a>
                    </li>
    
                    <li style="--bg:#57e5ff;"class="dropdown">
                    <div class="title">
                        <a href="#">
                            <div class="icon"><ion-icon name="folder"></ion-icon></div>
                            <div class="text">Folders</div>
                            <div class="arrow"><ion-icon name="chevron-down-outline"></ion-icon></div>
                            <button class="openPopup"><ion-icon name="add-circle-outline"></ion-icon></button>
                        </a>
                    </div>
                    <div class="submenu" id="submenu">
                        <a href="#" class="submenu-title">Folders</a>
                    </div>
                    </li>
    
    
                    <li style="--bg:#48e47c;">
                        <a href="analytics.html">
                            <div class="icon"><ion-icon name="analytics-outline"></ion-icon></div>
                        <div class="text">Analytics</div>
                        </a>
                    </li>
                    <li style="--bg:#cf2a1e;">
                        <a href="trash.html">
                            <div class="icon"><ion-icon name="trash"></ion-icon></div>
                        <div class="text">Trash</div>
                        </a>
                    </li>
                    <li style="--bg:#57e5ff;">
                        <a href="settings.html">
                            <div class="icon"><ion-icon name="settings-outline"></ion-icon></div>
                        <div class="text">Settings</div>
                        </a>
                    </li>
                  
                </div>
                <div class="bottom">
                    <li style="--bg:#333;">
                        <a href="#">
                            <div class="icon">
                                <div class="imgBx">
                                    <img src="images/check.png" width="100" heigt="100">
                                </div>
                            </div>
                            <div class="text">Iris Lung</div>
                        </a>
                    </li>
                    <li style="--bg:#333;">
                        <a href="mainPage.html">
                            <div class="icon"><ion-icon name="log-out-outline" ></ion-icon></div>
                        <div class="text">Logout</div>
                        </a>
                    </li>
                </div>
            </ul>
        </div>
        
        <!--top bar-->
        <div class="navbar">
            <div class="MenuOptions">
            <form action="" method="get" class="search-bar">
            <input  type="text" placeholder="Search" name="Search">
            <button type="submit"><ion-icon name="search"></ion-icon></button>
            </form>
    
            </div>
        </div>
        
    <!--add password-->
    <div class="favorites">
        <a href="dashboard.html" style="--clr: #f5d545; "><span>Add Favorite</span></a>
        <div class="passwordTable">
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Email/ Username</th>
                        <th>Last modified</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="passwordTbl">
                    
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add this div for item information -->
    <div class="itemInfo inactive">
        <div class="itemContent">
            <div class="closeBtn"><ion-icon name="close-circle-outline"></ion-icon></div>
            <div class="itemDetails">
                <div class="itemImage">
                            <div class="icon">
                                <img src="" alt="" width="50" height="50", align-items="center">
                            </div>
                </div>
                <div class="itemTitle"></div>
                <div class="cards">
                    <div class="card">
                        <div class="card-content">
                            <div class="card-name">Delete</div>
                        </div>
                        <div class="icon-box">
                            <ion-icon name="trash-outline"></ion-icon>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-content">
                            <div class="card-name">Share</div>
                        </div>
                        <div class="icon-box">
                            <ion-icon name="share-outline"></ion-icon>
                        </div>
                    </div>
                    <div class="card" id="dropdown-card">
                        <div class="card-content">
                            <div class="card-name">More</div>
                            
                        </div>
                        <div class="icon-box">
                            <ion-icon name="menu-outline"></ion-icon>
                        </div>
                        <div class="dropdown-menu" id="dropdown-menu">
                            <a href="#" id="move-option"onclick="moveToFolder()">Move to folder</a>
                            <a href="#" id="remove-option" onclick="removeFromFolder()">Remove from folder</a>
                        </div>
                    </div>
                   
                </div>
                <div class="itemWebsite"></div>
                <div class="itemFolder"></div>
                <div class="editButton"><button type="submit">Edit</button></div>
            </div>
        </div>

    </div>
    </div>
    <div class="popup" id="popup">
        <h2> Add new folder </h2>
        <div class="closeBtn" ><ion-icon name="close-circle-outline"></ion-icon></div>
        <h3> Enter new folder name:</h3>
        <form id="addFolderForm">
            <input type="text" name="newFolderName">
            <div class="buttonC">
                <button type="submit" id="addFolderBtn">Add Folder</button>
            </div>
        </form>
    </div>
    <div class="createAndMove" id="createAndMove">
        <h2> Add new folder </h2>
        <div class="closeBtn" ><ion-icon name="close-circle-outline"></ion-icon></div>
        <h3> Enter new folder name:</h3>
        <form id="fldrForm">
        <input  type="text" name="newFldrName">
            <button type="submit" id="createMove">Create and Move</button>
        </form>
        </div>
        
    </div>
    <div class="popupMoveToFolder" id="move-popup">
        <h2>Title</h2>
        <div class="closeBtn"><ion-icon name="close-circle-outline"></ion-icon></div>
        <select id="folder-list">
            <option value="New Folder">New Folder</option>
            
        </select>
        <button id="move-btn">Move to Folder</button>
    </div>
    
    <div class="popupRemoveFromFolder" id="remove-popup">
        <p id="remove-message"></p>
    </div>
     
    <div class="moveMessage" id="moveMessage">
        <p id="move-message"></p>
    </div>
    <div class="createMessage" id="createMessage">
        <p id="create-message"></p>
    </div>
    <script type="module" src="rendererFavorites.js"></script>
    <script type="module" src="rendererMove.js"></script>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script>
    let sidebar= document.querySelector('.sidebar');
    let navbar=document.querySelector(".navbar");
    let favorites=document.querySelector(".favorites");
    document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const title = urlParams.get('title');
    document.getElementById('pageTitle').textContent = title; 
});


    let MenuList= document.querySelectorAll('.MenuList li');
    function activeLink(){
        MenuList.forEach((item)=> 
            item.classList.remove('active'));  
        setTimeout(() => {
        if (!this.classList.contains('dropdown')) {
        this.classList.add('active');
    }
        }, 100);
    }
    MenuList.forEach((item)=> 
    item.addEventListener('click',activeLink));

    let button= document.querySelectorAll('.favorites a');
    button.forEach(btn =>{
        btn.onmousemove= function(e){
            let x= e.pageX - btn.offsetLeft;
            let y= e.pageY - btn.offsetTop;

            btn.style.setProperty('--x', x + 'px');
            btn.style.setProperty('--y', y + 'px');

        }
    })
    const arrowIcon = document.querySelector('.title .arrow');
    const submenu = document.querySelector('.dropdown .submenu');
    let dropdown=document.querySelector('.dropdown');
    arrowIcon.addEventListener('click', function() {
        submenu.classList.toggle('active');
        dropdown.classList.toggle('active');
        arrowIcon.classList.toggle('flip');
    });

    const foldersIcon=document.querySelector('.dropdown .title .icon');
    const openPopup=document.querySelector('.openPopup');
    const blur = document.getElementById('blur');
    const popup = document.getElementById('popup');

    openPopup.addEventListener("click",function(){
            blur.classList.toggle('active'),
            popup.classList.toggle('active')
    });
    const itemInfo = document.querySelector('.itemInfo');
    const closeBtn = document.querySelector('.itemInfo .closeBtn');
    const tableRows = document.querySelectorAll('.passwordTable tbody tr');

    // Function to open item info
    function openItemInfo() {
        // Show item info
        itemInfo.classList.remove('inactive');
        itemInfo.classList.add('active');
        // Get data from the clicked table row
        const title = this.querySelector('.tableTitle').textContent;
        const website = ''; // You should add logic to fetch website address
        const folder = ''; // You should add logic to fetch folder
        const imageSrc = ''; // You should add logic to fetch image source

        // Populate item info
        itemInfo.querySelector('.itemTitle').textContent = title;
        itemInfo.querySelector('.itemWebsite').textContent = `Website: ${website}`;
        itemInfo.querySelector('.itemFolder').textContent = `Folder: ${folder}`;
        itemInfo.querySelector('.itemImage img').src = imageSrc;

        
    }

    // Function to close item info
    function closeItemInfo() {
        itemInfo.classList.remove('active');
        itemInfo.classList.add('inactive');    
    }

    // Add click event listeners to table rows
    tableRows.forEach(row => {
        row.addEventListener('click', openItemInfo);
    });

    // Add click event listener to close button
    closeBtn.addEventListener('click', closeItemInfo);
    
     // Add click event listeners to buttons in the action column
     const actionButtons = document.querySelectorAll('.passwordTable tbody tr td:last-child button');
    actionButtons.forEach(button => {
        button.addEventListener('click', function(event) {
            // Stop event propagation to prevent opening item info
            event.stopPropagation();
            // Handle button click here
            // You can add different functions for different buttons
            if (button.contains('folder')) {
                // Handle folder button click
            } else if (button.contains('rocket')) {
                // Handle rocket button click
            } else if (button.contains('trash')) {
                // Handle trash button click
            }
        });
    });
    const card=document.getElementById('dropdown-card');
    card.addEventListener("click",function(){
        var dropdownMenu = document.getElementById('dropdown-menu');
        dropdownMenu.classList.toggle('active');
    });
    // Function to show popup
    function showPopup(popupId) {
        document.getElementById(popupId).style.display = "block";
    }


    // Move to folder option
    document.getElementById('move-option').addEventListener('click', function(event) {
        event.preventDefault();
        showPopup('move-popup');
        blur.classList.toggle('active');

    });
    // Function to hide popup
    function hidePopup(popupId) {
        document.getElementById(popupId).style.display = "none";

    }

    document.getElementById('remove-option').addEventListener('click', function(event) {
        event.preventDefault();
        document.getElementById('remove-message').innerText = "Item removed from folder.";
        showPopup('remove-popup');
        setTimeout(function() {
            hidePopup('remove-popup');
        }, 1000);
    });

    document.getElementById('move-btn').addEventListener('click', function(event) {
        var folderSelect = document.getElementById('folder-list');
        var selectedFolder = folderSelect.options[folderSelect.selectedIndex].value;
        if (selectedFolder === 'New Folder') {
            event.preventDefault();
            let create=document.getElementById('createAndMove');
            create.classList.add('active');
            showPopup('createAndMove');

        } else {
           event.preventDefault();
           document.getElementById('move-message').innerText="Item moved to folder";
           blur.classList.toggle('active');
            hidePopup('move-popup');
            showPopup('moveMessage');
            setTimeout(function() {
                hidePopup('moveMessage');
                window.location.reload();

        }, 1000);

        }
    });
    const closeBtnMoveToFolder = document.querySelector('.popupMoveToFolder .closeBtn');
    closeBtnMoveToFolder.addEventListener('click', function () {
            hidePopup('move-popup');
            blur.classList.toggle('active');

        });

    const closeCreateAndMove=document.querySelector('.createAndMove .closeBtn');
    closeCreateAndMove.addEventListener('click',function(){
        hidePopup('createAndMove');
    })
    const closeAddFolder=document.querySelector('.popup .closeBtn');
    closeAddFolder.addEventListener('click',function(){
        popup.classList.toggle('active');
        blur.classList.toggle('active');
    })


</script>
</body>
</html>